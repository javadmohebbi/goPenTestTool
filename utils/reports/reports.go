package reports

import (
	"fmt"
	"os"
	"time"
)

// struct for creating reports
type Reports struct {
	filePath string

	f *os.File
}

// create new instance of reports
func New(filepath string) (*Reports, error) {

	t := time.Now()

	f, err := os.Create(filepath + t.Format("20060102-15-04-05.csv"))
	if err != nil {
		return &Reports{}, err
	}

	return &Reports{
		filePath: filepath,
		f:        f,
	}, nil
}

// Write new line to the report file & append '\n' to end of the line
// it returns number of writen bytes and error (if has)
func (r *Reports) WriteLine(line string) (int, error) {
	return r.f.WriteString(fmt.Sprintf("%s\n", line))
}

// close file
func (r *Reports) Close() error {
	return r.f.Close()
}
